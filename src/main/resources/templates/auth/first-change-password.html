<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set Your Password - Assignment Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/first-change-password.css}">
</head>
<body>
<!-- Floating shapes -->
<div class="shape"></div>
<div class="shape"></div>
<div class="shape"></div>

<div class="setup-container">
    <div class="setup-card">
        <!-- Logo -->
        <div class="logo-icon">
            <i class="bi bi-key-fill"></i>
        </div>

        <!-- Header -->
        <div class="text-center mb-4">
            <h1>Set Your Password</h1>
            <p class="subtitle">Welcome! As a new user, you must set a secure password before you can continue.</p>
        </div>

        <!-- Welome, Badge -->
        <div class="welcome-badge">
            <i class="bi bi-person-check-fill"></i>
            <p>First Time Setup</p>
        </div>

        <!-- Error Message -->
        <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Error!</strong> <span th:text="${error}">Passwords do not match</span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Password Requirements -->
        <div class="password-requirements">
            <div class="requirement" id="req-length">
                <i class="bi bi-check-circle-fill"></i>
                <span>At least 8 characters long</span>
            </div>
            <div class="requirement" id="req-uppercase">
                <i class="bi bi-check-circle-fill"></i>
                <span>Include uppercase letters</span>
            </div>
            <div class="requirement" id="req-lowercase">
                <i class="bi bi-check-circle-fill"></i>
                <span>Include lowercase letters</span>
            </div>
            <div class="requirement" id="req-number">
                <i class="bi bi-check-circle-fill"></i>
                <span>Include at least one number</span>
            </div>
        </div>

        <form th:action="@{/auth/set-password}" method="POST" id="setupForm">

            <!-- New Password -->
            <div class="form-floating mb-3 position-relative">
                <input type="password"
                       class="form-control"
                       id="newPassword"
                       name="newPassword"
                       placeholder="New Password"
                       required
                       minlength="8">
                <label for="newPassword">
                    <i class="bi bi-lock me-2"></i>New Password
                </label>
                <i class="bi bi-eye password-toggle" id="toggleNew"></i>
            </div>

            <!-- Confirm Password -->
            <div class="form-floating mb-4 position-relative">
                <input type="password"
                       class="form-control"
                       id="confirmPassword"
                       name="confirmPassword"
                       placeholder="Confirm Password"
                       required
                       minlength="8">
                <label for="confirmPassword">
                    <i class="bi bi-lock-fill me-2"></i>Confirm Password
                </label>
                <i class="bi bi-eye password-toggle" id="toggleConfirm"></i>
            </div>

            <!-- Submit Button -->
            <button class="btn btn-primary w-100" type="submit">
                <i class="bi bi-check-circle me-2"></i>
                Set Password and Continue
            </button>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/first-change-password.js}"></script>
</body>
</html>